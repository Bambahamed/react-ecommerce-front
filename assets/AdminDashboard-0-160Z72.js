import{N as d,j as e,P as i,r as n,b as h,B as p}from"./index-zqpnlBSv.js";import{A as x}from"./AdminNav-COMLd7qX.js";import{S as j}from"./ShowPaymentInfo-BsbEkwWq.js";import{C as u,a as m}from"./CloseCircleOutlined-BXLCJi5f.js";const g=async c=>{try{return(await d.get("http://localhost:8000/api/admin/orders",{headers:{authtoken:c}})).data}catch(t){throw console.error("Error creating product:",t),t}},v=async(c,t,l)=>{try{return(await d.put("http://localhost:8000/api/admin/order-status",{orderId:c,orderStatus:t},{headers:{authtoken:l}})).data}catch(s){throw console.error("Error creating product:",s),s}},N=({orders:c,handleStatusChange:t})=>{const l=s=>e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"Images"}),e.jsx("th",{scope:"col",children:"Title"}),e.jsx("th",{scope:"col",children:"Price"}),e.jsx("th",{scope:"col",children:"Brand"}),e.jsx("th",{scope:"col",children:"Color"}),e.jsx("th",{scope:"col",children:"Count"}),e.jsx("th",{scope:"col",children:"Shipping"})]})}),e.jsx("tbody",{children:s.products.map((r,o)=>e.jsxs("tr",{children:[e.jsx("td",{children:r.product.images.length>0?r.product.images.map(a=>e.jsx("img",{src:a.url,alt:"url",height:50})):e.jsx("img",{src:i,alt:"Laptop",height:50})}),e.jsx("td",{children:e.jsx("b",{children:r.product.title})}),e.jsx("td",{children:r.product.price}),e.jsx("td",{children:r.product.brand}),e.jsx("td",{children:r.color}),e.jsx("td",{children:r.count}),e.jsx("td",{children:r.product.shipping==="Yes"?e.jsx(u,{style:{color:"green"}}):e.jsx(m,{style:{color:"red"}})})]}))})]});return e.jsx(e.Fragment,{children:c.reverse().map(s=>e.jsxs("div",{className:"row pb-5",children:[e.jsxs("div",{className:"btn btn-block bg-light",children:[e.jsx(j,{order:s,showStatus:!1}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:"Delivery Status"}),e.jsx("div",{className:"col-md-8",children:e.jsxs("select",{onChange:r=>t(s._id,r.target.value),className:"form-control",defaultValue:s.orderStatus,name:"status",children:[e.jsx("option",{value:"Not Processed",children:"Not Processed"}),e.jsx("option",{value:"Cash on Delivery",children:"Cash On Delivery"}),e.jsx("option",{value:"Processing",children:"Processing"}),e.jsx("option",{value:"Dispatched",children:"Dispatched"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"}),e.jsx("option",{value:"Completed",children:"Completed"})]})})]})]}),l(s)]},s._id))})},w=()=>{const[c,t]=n.useState([]),{user:l}=h(o=>({...o}));n.useEffect(()=>{s()},[]);const s=()=>{g(l.token).then(o=>{console.log(JSON.stringify(o,null,4)),t(o)})},r=(o,a)=>{v(o,a,l.token).then(b=>{p.success("Status updated"),s()})};return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-2",children:e.jsx(x,{})}),e.jsxs("div",{className:"col",children:[e.jsx("h4",{children:"Admin Dashboard"}),e.jsx(N,{orders:c,handleStatusChange:r})]})]})})};export{w as default};
