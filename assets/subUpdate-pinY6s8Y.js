import{r as a,b as v,a as S,a0 as N,j as s,B as m}from"./index-zqpnlBSv.js";import{A as b}from"./AdminNav-COMLd7qX.js";import{a as C,u as y}from"./sub-ButcDox7.js";import{g as P}from"./category-CpwOFqa3.js";import{C as E}from"./CategoryForm-CWq7D3qb.js";const B=()=>{const[n,r]=a.useState(""),[u,o]=a.useState(!1),{user:g}=v(e=>({...e})),[c,h]=a.useState([]);a.useState("");const[i,l]=a.useState(""),p=S();let{slug:d}=N();a.useEffect(()=>{f(),x()},[]);const x=()=>C(d).then(e=>{r(e.name),l(e.parent)}),f=()=>P().then(e=>h(e.data)),j=e=>{e.preventDefault(),o(!0),y(d,g.token,{name:n,parent:i}).then(t=>{o(!1),r(""),m.success(`"${t.name}" is updated`),p("/admin/sub")}).catch(t=>{o(!1),t.response.status===400&&m.error(t.response.data)})};return s.jsx("div",{className:"container-fluid",children:s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-md-2",children:s.jsx(b,{})}),s.jsxs("div",{className:"col",children:[u?s.jsx("h4",{className:"text-danger",children:"Loading..."}):s.jsx("h4",{children:"Create sub category"}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Parent category"}),s.jsxs("select",{name:"category",className:"form-control",onChange:e=>l(e.target.value),children:[s.jsx("option",{children:"Please select"}),c.length>0&&c.map(e=>s.jsx("option",{value:e._id,selected:e._id===i,children:e.name},e._id))]})]}),s.jsx(E,{handleSubmit:j,name:n,setName:r})]})]})})};export{B as default};
