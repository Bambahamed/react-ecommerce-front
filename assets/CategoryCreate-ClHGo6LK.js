import{r,b as j,j as e,L as y,B as o}from"./index-C2HzGy_n.js";import{A as C}from"./AdminNav-Cb9wh3_h.js";import{g as N,c as v,r as b}from"./category-De6rw0Q9.js";import{C as w}from"./CategoryForm-DVdGcNs0.js";import{L}from"./LocalSearch-C3CffbVT.js";import{E as S}from"./EditOutlined-CYGk3KoU.js";import{D as k}from"./DeleteOutlined-BD_bSEwQ.js";const F=()=>{const[l,c]=r.useState(""),[m,t]=r.useState(!1),{user:i}=j(s=>({...s})),[f,h]=r.useState([]),[d,u]=r.useState("");r.useEffect(()=>{n()},[]);const n=()=>N().then(s=>h(s.data)),x=s=>{s.preventDefault(),t(!0),v(i.token,{name:l}).then(a=>{t(!1),c(""),o.success(`"${a.name}" is created`),n()}).catch(a=>{t(!1),a.response.status===400&&o.error(a.response.data)})},g=async s=>{window.confirm("Delete?")&&(t(!0),b(s,i.token).then(a=>{t(!1),o.error(`${a.name} deleted`),n()}).catch(a=>{a.response.status===400&&(t(!1),o.error(a.response.data))}))},p=s=>a=>a.name.toLowerCase().includes(s);return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-2",children:e.jsx(C,{})}),e.jsxs("div",{className:"col",children:[m?e.jsx("h4",{className:"text-danger",children:"Loading..."}):e.jsx("h4",{children:"Create category"}),e.jsx(w,{handleSubmit:x,name:l,setName:c}),e.jsx(L,{keyword:d,setKeyword:u}),e.jsx("hr",{}),f.filter(p(d)).map(s=>e.jsxs("div",{className:"alert alert-secondary",style:{display:"block"},children:[s.name,e.jsx("span",{className:"btn btn-sm",style:{float:"right"},onClick:()=>{g(s.slug)},children:e.jsx(k,{className:"text-danger"})}),e.jsx(y,{to:`/admin/category/${s.slug}`,children:e.jsx("span",{className:"btn btn-sm",style:{float:"right"},children:e.jsx(S,{className:"text-warning"})})})]},s._id))]})]})})};export{F as default};
