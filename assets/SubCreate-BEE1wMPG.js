import{r as a,b as v,j as s,L as C,B as o}from"./index-C2HzGy_n.js";import{A as w}from"./AdminNav-Cb9wh3_h.js";import{g as L,c as k,r as E}from"./sub-KlrvS5Hx.js";import{g as D}from"./category-De6rw0Q9.js";import{C as _}from"./CategoryForm-DVdGcNs0.js";import{L as $}from"./LocalSearch-C3CffbVT.js";import{D as A}from"./DeleteOutlined-BD_bSEwQ.js";import{E as O}from"./EditOutlined-CYGk3KoU.js";const H=()=>{const[l,c]=a.useState(""),[u,r]=a.useState(!1),{user:i}=v(e=>({...e})),[d,h]=a.useState([]),[m,g]=a.useState(""),[x,f]=a.useState(""),[p,j]=a.useState([]);a.useEffect(()=>{b(),n()},[]);const n=()=>L().then(e=>j(e.data)),b=()=>D().then(e=>h(e.data)),S=e=>{e.preventDefault(),r(!0),k(i.token,{name:l,parent:x}).then(t=>{r(!1),c(""),o.success(`"${t.name}" is created`),n()}).catch(t=>{r(!1),t.response.status===400&&o.error(t.response.data)})},y=async e=>{window.confirm("Delete?")&&(r(!0),E(e,i.token).then(t=>{r(!1),o.error(`${t.name} deleted`),n()}).catch(t=>{t.response.status===400&&(r(!1),o.error(t.response.data))}))},N=e=>t=>t.name.toLowerCase().includes(e);return s.jsx("div",{className:"container-fluid",children:s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-md-2",children:s.jsx(w,{})}),s.jsxs("div",{className:"col",children:[u?s.jsx("h4",{className:"text-danger",children:"Loading..."}):s.jsx("h4",{children:"Create sub category"}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Parent category"}),s.jsxs("select",{name:"category",className:"form-control",onChange:e=>f(e.target.value),children:[s.jsx("option",{children:"Please select"}),d.length>0&&d.map(e=>s.jsx("option",{value:e._id,children:e.name},e._id))]})]}),s.jsx(_,{handleSubmit:S,name:l,setName:c}),s.jsx($,{keyword:m,setKeyword:g}),s.jsx("hr",{}),p.filter(N(m)).map(e=>s.jsxs("div",{className:"alert alert-secondary",style:{display:"block"},children:[e.name,s.jsx("span",{className:"btn btn-sm",style:{float:"right"},onClick:()=>{y(e.slug)},children:s.jsx(A,{className:"text-danger"})}),s.jsx(C,{to:`/admin/sub/${e.slug}`,children:s.jsx("span",{className:"btn btn-sm",style:{float:"right"},children:s.jsx(O,{className:"text-warning"})})})]},e._id))]})]})})};export{H as default};
