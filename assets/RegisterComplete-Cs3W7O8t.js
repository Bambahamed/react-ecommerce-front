import{r as l,a as f,u as x,j as t,B as c,I as v,f as m,J as R,d as j}from"./index-C2HzGy_n.js";/* empty css                      */const N=()=>{const[o,d]=l.useState(""),[a,g]=l.useState(""),u=f(),w=x();l.useEffect(()=>{const e=window.localStorage.getItem("emailForRegistration");e&&d(e),console.log(window.location.href),console.log(e)},[u]);const p=async e=>{if(e.preventDefault(),!o||!a){c.warning("Email and Password is required");return}if(a.length<6){c.warning("Password must be at least 6 characters long");return}try{if((await v(m,o,window.location.href)).user.emailVerified){window.localStorage.removeItem("emailForRegistration");let n=m.currentUser;await R(n,a);const i=await n.getIdTokenResult();console.log("user",n,"idTokenResult",i),j(i.token).then(s=>{console.log(s),w({type:"LOGGED_IN_USER",payload:{name:s.name,email:s.email,token:i.token,role:s.role,_id:s._id}})}).catch(s=>console.log(s))}u("/")}catch(r){console.log(r),c.error(r.message)}},h=()=>t.jsxs("form",{onSubmit:p,children:[t.jsx("input",{type:"email",className:"form-control",value:o,onChange:e=>d(e.target.value),autoFocus:!0,disabled:!0}),t.jsx("input",{type:"password",className:"form-control",value:a,onChange:e=>g(e.target.value),placeholder:"Password",autoFocus:!0}),t.jsx("button",{type:"submit",className:"btn btn-dark mt-3",children:"Complete Registration"})]});return t.jsx("div",{className:"container p-5",children:t.jsx("div",{className:"row",children:t.jsxs("div",{className:"col-md-6 offset-md-3",children:[t.jsx("h4",{children:"Register"}),h()]})})})};export{N as default};
