import{r as n,A as j,_ as k,u as b,a as R,b as G,c as S,j as o,L as _,s as I,d as f,B as v,e as M,f as x,g as P}from"./index-C2HzGy_n.js";/* empty css                      *//* empty css            */import{B as w}from"./button-CkZXpcqd.js";import"./isVisible-CLoTn8TD.js";import"./index-yIrI1dmz.js";import"./reactNode-D5QBnBnH.js";import"./compact-item-5orumCwJ.js";var z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M881 442.4H519.7v148.5h206.4c-8.9 48-35.9 88.6-76.6 115.8-34.4 23-78.3 36.6-129.9 36.6-99.9 0-184.4-67.5-214.6-158.2-7.6-23-12-47.6-12-72.9s4.4-49.9 12-72.9c30.3-90.6 114.8-158.1 214.7-158.1 56.3 0 106.8 19.4 146.6 57.4l110-110.1c-66.5-62-153.2-100-256.6-100-149.9 0-279.6 86-342.7 211.4-26 51.8-40.8 110.4-40.8 172.4S151 632.8 177 684.6C240.1 810 369.8 896 519.7 896c103.6 0 190.4-34.4 253.8-93 72.5-66.8 114.4-165.2 114.4-282.1 0-27.2-2.4-53.3-6.9-78.5z"}}]},name:"google",theme:"outlined"};const B=z;var C=function(r,l){return n.createElement(j,k({},r,{ref:l,icon:B}))},D=n.forwardRef(C);const $=D;var F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"};const T=F;var U=function(r,l){return n.createElement(j,k({},r,{ref:l,icon:T}))},A=n.forwardRef(U);const H=A,Z=()=>{const[i,r]=n.useState("bambahamed052@gmail.com"),[l,y]=n.useState("123456789"),[L,g]=n.useState(!1);let h=b();const c=R(),{user:m}=G(e=>({...e})),d=S();n.useEffect(()=>{d.state&&d.state.from||m&&m.token&&c("/")},[m,c]);const p=e=>{const t=d.state&&d.state.from;console.log(t),console.log(d.state),t?c(t):e.role==="admin"?c("/admin/dashboard"):c("/user/history")},N=async e=>{e.preventDefault(),g(!0);try{const t=await M(x,i,l),{user:u}=t,a=await u.getIdTokenResult();f(a.token).then(s=>{console.log(s),h({type:"LOGGED_IN_USER",payload:{name:s.name,email:s.email,token:a.token,role:s.role,_id:s._id}}),p(s)}).catch(s=>console.log(s))}catch(t){console.log(t),v.error(t.message),g(!1)}},E=()=>{I(x,P).then(async e=>{const{user:t}=e,u=await t.getIdTokenResult();f(u.token).then(a=>{console.log(a),h({type:"LOGGED_IN_USER",payload:{name:a.name,email:a.email,token:u.token,role:a.role,_id:a._id}}),p(a)}).catch()}).catch(e=>{console.log(e),v.error(e.message)})},O=()=>o.jsxs("form",{children:[o.jsx("div",{className:"form-group",children:o.jsx("input",{type:"email",className:"form-control",value:i,onChange:e=>r(e.target.value),placeholder:"Your Email",autoFocus:!0})}),o.jsx("div",{className:"form-group my-3",children:o.jsx("input",{type:"password",className:"form-control",value:l,onChange:e=>y(e.target.value),placeholder:"Your Password",autoFocus:!0})}),o.jsx(w,{type:"primary",className:"mb-3",onClick:N,block:!0,shape:"round",icon:o.jsx(H,{}),size:"large",disabled:!i||l.length<6,children:"Login with Email/Password"})]});return o.jsx("div",{className:"container p-5",children:o.jsx("div",{className:"row",children:o.jsxs("div",{className:"col-md-6 offset-md-3",children:[L?o.jsx("h4",{className:"text-danger",children:"Loading...."}):o.jsx("h4",{children:"Login"}),O(),o.jsx(w,{type:"primary",danger:!0,className:"mb-3",onClick:E,block:!0,shape:"round",icon:o.jsx($,{}),size:"large",children:"Login with Google"}),o.jsx(_,{to:"/forgot/password",className:"float-end text-danger text-decoration-none",children:"Forgot Password"})]})})})};export{Z as default};
