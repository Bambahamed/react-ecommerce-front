import{j as e,r as l,b as _,a0 as B,a as Y,a1 as D,B as P}from"./index-C2HzGy_n.js";import{A as L}from"./AdminNav-Cb9wh3_h.js";import{d as R,u as U}from"./product-s5oaCh01.js";import{S as E}from"./useBreakpoint-CEnMdJds.js";import{b as A,g as w}from"./category-De6rw0Q9.js";import{F as I}from"./FileUpload-D8l-99C5.js";import"./index-D_YutXat.js";import"./isVisible-CLoTn8TD.js";import"./PurePanel-fdu4Gupx.js";import"./compact-item-5orumCwJ.js";import"./CheckOutlined-CFO8NhmO.js";import"./SearchOutlined-DQaiCYbi.js";import"./index-Cgi2wF1a.js";import"./index-B5yKs8Pq.js";import"./reactNode-D5QBnBnH.js";const{Option:T}=E,q=({handleChange:t,handleSubmit:r,values:h,handleCategoryChange:u,subOptions:m,showSub:x,setValues:C,categories:p,arrayOfSubs:g,setArrayOfSubs:d,selectedCategory:n})=>{const{title:j,description:v,price:i,category:f,subs:b,shipping:N,quantity:S,images:O,colors:y,brands:s,color:o,brand:c}=h;return e.jsx("div",{children:e.jsxs("form",{onSubmit:r,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Title"}),e.jsx("input",{type:"text",name:"title",className:"form-control",value:j,onChange:t})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("input",{type:"text",name:"description",className:"form-control",value:v,onChange:t})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Price"}),e.jsx("input",{type:"number",name:"price",className:"form-control",value:i,onChange:t})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Shipping"}),e.jsxs("select",{value:N==="Yes"?"Yes":"No",name:"shipping",className:"form-control",onChange:t,children:[e.jsx("option",{value:"No",children:"No"}),e.jsx("option",{value:"Yes",children:"Yes"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Quantity"}),e.jsx("input",{type:"number",name:"quantity",className:"form-control",value:S,onChange:t})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Color"}),e.jsx("select",{value:o,name:"color",className:"form-control",onChange:t,children:y.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Brand"}),e.jsx("select",{value:c,name:"brand",className:"form-control",onChange:t,children:s.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Category"}),e.jsx("select",{name:"category",className:"form-control",onChange:u,value:n||f.id,children:p&&p.map(a=>e.jsx("option",{value:a._id,children:a.name},a._id))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Sub Category"}),e.jsx(E,{mode:"multiple",style:{width:"100%"},placeholder:"Please Select",value:g,onChange:a=>d(a),children:m&&m.map(a=>e.jsx(T,{value:a._id,children:a.name},a._id))})]}),e.jsx("button",{className:"btn btn-outline-info",children:"Save"})]})})},F={title:"",description:"",price:"",category:"",subs:[],shopping:"",quantity:"",images:[],colors:["Black","Brown","Silver","White","Blue"],brands:["Apple","Samsung","Microsoft","Lenovo","ASUS"],color:"",brand:""},te=()=>{const[t,r]=l.useState(F),{user:h}=_(s=>({...s})),{slug:u}=B(),[m,x]=l.useState([]),[C,p]=l.useState([]),[g,d]=l.useState([]),[n,j]=l.useState(""),[v,i]=l.useState(!1),f=Y();l.useEffect(()=>{b(),N()},[]);const b=()=>{R(u).then(s=>{r({...t,...s.data}),A(s.data.category._id).then(c=>{x(c)});let o=[];s.data.subs.map(c=>{o.push(c._id)}),console.log("ARR",o),d(c=>o)}).catch(s=>{console.log(s)})},N=()=>w().then(s=>{p(s.data)}),S=s=>{s.preventDefault(),i(!0),t.subs=g,t.category=n||t.category,U(h.token,u,t).then(o=>{i(!1),P.success(`"${o.title}" is updated`),f("/admin/products")}).catch(o=>{console.log(o),i(!1),P.error(o.response.err)})},O=s=>{s.preventDefault(),r({...t,[s.target.name]:s.target.value})},y=s=>{s.preventDefault(),console.log("CLICKED CATEGORY",s.target.value),r({...t,subs:[]}),j(s.target.value),A(s.target.value).then(o=>{console.log("SUB OPTIONS ON CATGEORY CLICK",o),x(o)}),console.log("EXISt",t.category),t.category._id===s.target.value&&b(),d([])};return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-2",children:e.jsx(L,{})}),e.jsxs("div",{className:"col-md-10",children:[v?e.jsx(D,{className:"text-danger h1"}):e.jsx("h4",{children:"Product update"}),JSON.stringify(t),e.jsx("div",{className:"p-3",children:e.jsx(I,{values:t,setValues:r,setLoading:i})}),e.jsx(q,{handleSubmit:S,handleChange:O,setValues:r,values:t,handleCategoryChange:y,categories:C,subOptions:m,arrayOfSubs:g,setArrayOfSubs:d,selectedCategory:n}),e.jsx("hr",{})]})]})})};export{te as default};
